%div#header
  %div#header-content
    %span.navbar-title
      =image_tag "favicon.png", width: '90'
      %h2 DJ Suite for Spotify
      %span{ :style => "float: right; font-size: 18px" }
        = link_to "FAQ", faq_path


%br
  %div.container  
    %h1
      = link_to @playlist.name, @playlist.external_urls["spotify"], :target => "_blank"

    %br
      %span.arrow{ :style => "float: left; font-size: 20px"}
        %a{:href => "javascript:javascript:history.go(-1)"} <<
      %table.table.table-striped.table-bordered
        %thead
          %tr
            %th.filter-false{"data-field" => "id"} #
            %th{"data-field" => "track", "data-placeholder" => "Filter"} Track
            %th{"data-field" => "artist", "data-placeholder" => "Filter"} Artist
            %th{"data-field" => "length", "data-placeholder" => "Filter"} Length
            %th{"data-field" => "bpm", "data-placeholder" => "Filter"} BPM
            %th{"data-field" => "key", "data-placeholder" => "Filter"} Key
            %th{"data-field" => "energy", "data-placeholder" => "Filter"} Energy
            %th{"data-field" => "dance", "data-placeholder" => "Filter"} Dance
            %th{"data-field" => "popularity", "data-placeholder" => "Filter"} Popularity
        %tbody
          - @playlist.tracks.each_with_index do |track, i|
            %tr
              %td= (i+1)
              %td= track.name
              %td= track.artists.first.name
              %td= milliseconds(track.duration_ms)
              %td= @profile[i].audio_summary.tempo.round unless @profile[i] == nil
              %td= harmonic_mixing((@profile[i].audio_summary.key.to_s) + mode(@profile[i].audio_summary.mode)) unless @profile[i] == nil
              %td= percent(@profile[i].audio_summary.energy) unless @profile[i] == nil
              %td= percent(@profile[i].audio_summary.danceability) unless @profile[i] == nil
              %td= percent(@profile[i].song_hotttnesss) unless @profile[i] == nil
      %br
        %div.brighten
          = image_tag "create-playlist-green.png", width: '250'
#footer
  .container
    %p
      Powered by
      = link_to "Spotify", "http://www.spotify.com", :target => "_blank"
      and
      = link_to "The Echo Nest.", "http://the.echonest.com", :target => "_blank"
      Created by
      = link_to "Jeff Liu.", "http://last.fm/user/emperorliu", :target => "_blank"